# 报告格式说明 📄

## ✅ 已实现的改进

### 1. 自动格式化
系统现在会**自动**将HTML表格转换为Markdown表格！

### 2. 专业Markdown表格
所有数据表格现在使用标准Markdown格式：

**之前（HTML）**:
```html
<table>
  <thead><tr><th>指标</th><th>数值</th></tr></thead>
  <tbody><tr><td>营收</td><td>$35.1B</td></tr></tbody>
</table>
```

**现在（Markdown）**:
```markdown
| 指标 | 数值 |
|---|---|
| 营收 | $35.1B |
```

### 3. 更好的可读性
- ✅ 清晰的标题层级
- ✅ 合适的段落间距
- ✅ 专业的分隔线
- ✅ 统一的格式风格

---

## 📊 报告包含的表格

每份完整报告包含 **8-12个专业表格**：

### 1. 基本面分析部分
- 📊 **财务数据表** - 最新季度财务指标
- 📊 **盈利能力表** - ROE, ROA, 利润率等
- 📊 **行业对比表** - 与同行业公司对比

### 2. 业务板块分析部分
- 📊 **收入结构表** - 各业务板块收入占比
- 📊 **业务表现表** - 各板块增长率和利润率
- 📊 **战略定位表** - 竞争优势和合作伙伴

### 3. 增长催化剂部分
- 📊 **增长计划表** - 重大增长initiative
- 📊 **技术路线表** - 产品发布时间表
- 📊 **市场机会表** - TAM和预期收入

### 4. 估值分析部分
- 📊 **估值指标表** - P/E, P/S, EV/EBITDA等
- 📊 **可比公司表** - 3-5家同行对比
- 📊 **分析师目标价表** - 各机构预测汇总

---

## 🎯 查看报告的方式

### 方式1: VS Code（推荐）
1. 在VS Code中打开 `.md` 文件
2. 按 `Cmd+Shift+V`（Mac）或 `Ctrl+Shift+V`（Windows）
3. 查看美观的预览

### 方式2: Typora / Mark Text
专业的Markdown编辑器，表格显示更美观

### 方式3: GitHub
将文件push到GitHub，在线查看

### 方式4: 转换为PDF
使用 `pandoc` 或在线工具转换：
```bash
pandoc report.md -o report.pdf
```

---

## 🔧 手动格式化旧报告

如果您有之前生成的HTML格式报告，可以手动格式化：

```bash
cd /Users/yilanliu/Desktop/realtimesearch-report

# 格式化单个报告
python format_report.py reports/旧报告.md

# 批量格式化所有报告
for file in reports/*.md; do
    if [[ ! $file =~ "_formatted.md" ]]; then
        python format_report.py "$file"
    fi
done
```

---

## 📝 报告结构示例

```markdown
# 公司名称 估值报告

**生成时间**: 2025-11-04...
**分析类型**: valuation | **查询数**: 8/8 | **耗时**: 156秒

---

## 1. 基本面分析 (Fundamental Analysis)

### 公司概况
文字描述...

#### Q3 FY2025 财务数据

| 指标 | 数值 | 同比变化 |
|---|---|---|
| 营收 | $35.1B | +94% |
| 净利润 | $19.3B | +150% |

### 盈利能力分析
文字描述...

---

## 2. 业务板块分析 (Business Segments)

### 收入结构

| 业务板块 | 收入 | 占比 | 增长率 |
|---|---|---|---|
| 数据中心 | $29.8B | 85% | +120% |
| 游戏 | $4.2B | 12% | +10% |

---

## 3. 增长催化剂 (Growth Catalysts)

### 重大增长计划

| 计划 | 投资规模 | 预期影响 |
|---|---|---|
| OpenAI合作 | $100B | $20-30B年收入 |

---

## 4. 估值分析 (Valuation Analysis)

### 估值指标

| 指标 | 数值 | 评价 |
|---|---|---|
| P/E比率 | 59.0x | 合理 |
| 目标价 | $222 | 买入 |
```

---

## 💡 使用建议

### 1. 生成新报告
从现在开始，所有新报告都会自动格式化！

```python
from main import ValuationReportSystem

system = ValuationReportSystem()
result = system.generate_report("Apple Inc", save_to_file=True)

# 报告自动格式化为专业Markdown！
print(f"报告位置: {result['metadata']['saved_file']}")
```

### 2. Web界面
在Web界面生成的报告也会自动格式化

### 3. 查看报告
推荐使用支持Markdown的编辑器查看：
- **VS Code** - 内置预览
- **Typora** - 专业Markdown编辑器
- **Mark Text** - 免费开源
- **GitHub** - 在线查看

---

## 🎨 表格示例对比

### ✅ 格式化后（可读）

| 公司 | P/E | 目标价 | 评级 |
|---|---|---|---|
| NVIDIA | 59x | $222 | 买入 |
| AMD | 45x | $180 | 持有 |
| Intel | 25x | $35 | 卖出 |

### ❌ 格式化前（难读）

```html
<table><tr><th>公司</th><th>P/E</th>...
```

---

## 🚀 开始使用

1. **生成新报告**
   ```bash
   python test_full_report.py
   ```

2. **查看报告**
   ```bash
   cd reports/
   code 最新报告.md  # 在VS Code中打开
   ```

3. **享受专业格式**！📊

---

## 📚 相关文档

- `README.md` - 完整系统文档
- `使用指南.md` - 详细使用说明
- `format_report.py` - 格式化工具脚本

---

**现在所有报告都是专业的Markdown格式！** ✨

